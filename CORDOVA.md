# Apache Cordova Setup for GCashMall

This document describes how to build and deploy the GCashMall app for Android using Apache Cordova.

## Prerequisites

1. **Node.js** - Install Node.js (v16 or later)
2. **Android Studio** - Install Android Studio with Android SDK
3. **Java JDK** - Install JDK 11 or later
4. **Android SDK** - Ensure the following are installed via Android Studio SDK Manager:
   - Android SDK Platform 33 (Android 13)
   - Android SDK Build-Tools
   - Android Emulator
   - Android SDK Platform-Tools

5. Set environment variables:
   ```bash
   export ANDROID_HOME=$HOME/Library/Android/sdk
   export PATH=$PATH:$ANDROID_HOME/emulator
   export PATH=$PATH:$ANDROID_HOME/platform-tools
   ```

## Setup

1. Install project dependencies:
   ```bash
   npm install
   ```

2. Add the Android platform:
   ```bash
   npx cordova platform add android
   ```

## Build Commands

### Development Build
Build and run on a connected Android device or emulator:
```bash
npm run cordova:run
```

### Emulator Build
Build and run on the Android emulator:
```bash
npm run cordova:emulate
```

### Release Build
Build a release APK:
```bash
npm run cordova:build:release
```

The release APK will be located at:
`platforms/android/app/build/outputs/apk/release/app-release-unsigned.apk`

## Signing the Release APK

1. Generate a keystore (one-time):
   ```bash
   keytool -genkey -v -keystore gcashmall-release.keystore -alias gcashmall -keyalg RSA -keysize 2048 -validity 10000
   ```

2. Sign the APK:
   ```bash
   jarsigner -verbose -sigalg SHA1withRSA -digestalg SHA1 -keystore gcashmall-release.keystore platforms/android/app/build/outputs/apk/release/app-release-unsigned.apk gcashmall
   ```

3. Optimize the APK:
   ```bash
   zipalign -v 4 platforms/android/app/build/outputs/apk/release/app-release-unsigned.apk GCashMall.apk
   ```

## Adding Cordova Plugins

To add Cordova plugins (e.g., for camera, storage, etc.):

```bash
npx cordova plugin add cordova-plugin-camera
npx cordova plugin add cordova-plugin-file
npx cordova plugin add cordova-plugin-statusbar
npx cordova plugin add cordova-plugin-splashscreen
```

## Project Structure

- `config.xml` - Cordova configuration file
- `www/` - Built web assets (generated by Vite)
- `platforms/` - Platform-specific code (generated by Cordova)
- `plugins/` - Installed Cordova plugins
- `res/android/` - Android icons and splash screens

## Troubleshooting

### Build fails with SDK not found
Ensure `ANDROID_HOME` environment variable is set correctly.

### Emulator not starting
Make sure you have created an Android Virtual Device (AVD) in Android Studio.

### App crashes on launch
Check the console logs using:
```bash
adb logcat | grep -i "chromium\|SystemWebView"
```
